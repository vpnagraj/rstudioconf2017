<!DOCTYPE html>
<html>
  <head>
    <title>rstudio::conf 2017 recap</title>
    <meta charset="utf-8">
    <meta name="author" content="vp nagraj" />
    <link href="libs/remark-css-0.0.1/example.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
    <script src="libs/threejs-83/three.min.js"></script>
    <script src="libs/threejs-83/Detector.js"></script>
    <script src="libs/threejs-83/Projector.js"></script>
    <script src="libs/threejs-83/CanvasRenderer.js"></script>
    <script src="libs/threejs-83/TrackballControls.js"></script>
    <script src="libs/scatterplotThree-binding-0.3.0/scatterplotThree.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse

# rstudio::conf 2017 recap
### vp nagraj
### 2/16/2017

---

class: middle, center

## &lt;https://github.com/rstudio/rstudio-conf&gt;

---

&lt;h2&gt; #1: tidyverse as "dialect"&lt;/h2&gt;


```r
* library(tidyverse)  
```

.pull-left[

### "regular R"

1. `subset()`

1. `read.csv()`

1. baz(bar(foo))

1. data frame]

.pull-right[

### "tidyverse R"

1. `filter()`

1. `read_csv()`

1. `foo %&gt;% bar() %&gt;% baz()`

1. tibble]

---
&lt;h2&gt; #2: list-cols&lt;/h2&gt;

```r
library(gapminder)

gapminder %&gt;%
  group_by(country) %&gt;%
  nest() # from tidyr package
```

```
## # A tibble: 142 × 2
##        country              data
##         &lt;fctr&gt;            &lt;list&gt;
## 1  Afghanistan &lt;tibble [12 × 5]&gt;
## 2      Albania &lt;tibble [12 × 5]&gt;
## 3      Algeria &lt;tibble [12 × 5]&gt;
## 4       Angola &lt;tibble [12 × 5]&gt;
## 5    Argentina &lt;tibble [12 × 5]&gt;
## 6    Australia &lt;tibble [12 × 5]&gt;
## 7      Austria &lt;tibble [12 × 5]&gt;
## 8      Bahrain &lt;tibble [12 × 5]&gt;
## 9   Bangladesh &lt;tibble [12 × 5]&gt;
## 10     Belgium &lt;tibble [12 × 5]&gt;
## # ... with 132 more rows
```

---

&lt;h2&gt; #3: purrr&lt;/h2&gt;

&lt;http://bit.ly/purrr-rstudioconf&gt;

&lt;https://jennybc.github.io/purrr-tutorial/&gt;

**iterate a function over a list**

- `map()`: returns a list
- `map2()`: same as above but can iterate over two lists
- `map_chr()`: returns a character vector
- `map_lgl()`: returns a logical vector
- `map_dbl()`: returns a double precison (numeric) vector
- `map_int()`: returns an integer vector

---

&lt;h2&gt; #4: repurrrsive&lt;/h2&gt;

```r
library(purrr)
library(repurrrsive)

# how many colors are in each wes anderson movie palette?
wesanderson %&gt;%
  map_int(length)
```

```
##  GrandBudapest      Moonrise1         Royal1      Moonrise2     Cavalcanti 
##              4              4              4              4              5 
##         Royal2 GrandBudapest2      Moonrise3      Chevalier         Zissou 
##              5              4              5              4              5 
##   FantasticFox     Darjeeling       Rushmore   BottleRocket    Darjeeling2 
##              5              5              5              7              5
```
---

&lt;h2&gt; #4: repurrrsive&lt;/h2&gt;

```r
# which characters are included in game of thrones dataset?
got_chars %&gt;%
  map_chr(~ .x$name)
```

```
##  [1] "Theon Greyjoy"      "Tyrion Lannister"   "Victarion Greyjoy" 
##  [4] "Will"               "Areo Hotah"         "Chett"             
##  [7] "Cressen"            "Arianne Martell"    "Daenerys Targaryen"
## [10] "Davos Seaworth"     "Arya Stark"         "Arys Oakheart"     
## [13] "Asha Greyjoy"       "Barristan Selmy"    "Varamyr"           
## [16] "Brandon Stark"      "Brienne of Tarth"   "Catelyn Stark"     
## [19] "Cersei Lannister"   "Eddard Stark"       "Jaime Lannister"   
## [22] "Jon Connington"     "Jon Snow"           "Aeron Greyjoy"     
## [25] "Kevan Lannister"    "Melisandre"         "Merrett Frey"      
## [28] "Quentyn Martell"    "Sansa Stark"
```
---
&lt;h2&gt; #4: repurrrsive&lt;/h2&gt;

```r
got_chars %&gt;%
  set_names(map_chr(got_chars, "name")) %&gt;%
  map_lgl(~ .x$alive) %&gt;%
  enframe()
```

```
## # A tibble: 29 × 2
##                  name value
##                 &lt;chr&gt; &lt;lgl&gt;
## 1       Theon Greyjoy  TRUE
## 2    Tyrion Lannister  TRUE
## 3   Victarion Greyjoy  TRUE
## 4                Will FALSE
## 5          Areo Hotah  TRUE
## 6               Chett FALSE
## 7             Cressen FALSE
## 8     Arianne Martell  TRUE
## 9  Daenerys Targaryen  TRUE
## 10     Davos Seaworth  TRUE
## # ... with 19 more rows
```
---

&lt;h2&gt; #4: repurrrsive&lt;/h2&gt;

```r
# note gap_simple is repurrrsive version of gapminder
gap_simple %&gt;%
  group_by(country) %&gt;%
  nest() %&gt;%
  mutate(fit = map(data, ~ lm(lifeExp ~ year, data = .x)))
```

```
## # A tibble: 142 × 3
##        country              data      fit
##         &lt;fctr&gt;            &lt;list&gt;   &lt;list&gt;
## 1  Afghanistan &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 2      Albania &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 3      Algeria &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 4       Angola &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 5    Argentina &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 6    Australia &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 7      Austria &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 8      Bahrain &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 9   Bangladesh &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## 10     Belgium &lt;tibble [12 × 5]&gt; &lt;S3: lm&gt;
## # ... with 132 more rows
```
---
&lt;h2&gt; #5: fivevethirtyeight&lt;/h2&gt;

&lt;https://cran.r-project.org/web/packages/fivethirtyeight/vignettes/fivethirtyeight.html&gt;

- daily_show_guests
- fandango
- love_actually_adj
- pulitzer
- tennis_players_time
- weather_check
- hist_ncaa_bball_casts
- congress_age
- airline_safety
- trump_twitter
- unisex_names
- tarantino
- nutrition_pvalues
- *etc*
---
&lt;h2&gt; #5: fivevethirtyeight&lt;/h2&gt;

http://fivethirtyeight.com/features/a-statistical-analysis-of-the-work-of-bob-ross/


```r
library(fivethirtyeight)
library(tidyverse)
library(ggthemes)

bob_ross %&gt;%
  gather(feature, presence, apple_frame:wood_framed) %&gt;%
  group_by(feature) %&gt;%
  summarise(n = sum(presence), 
            perc = round(n / nrow(bob_ross), 2)) %&gt;%
  filter(perc &gt;= .02) %&gt;%
  mutate(perc = paste0(perc*100, "%")) %&gt;%
  arrange(desc(n)) %&gt;%
  ggplot(aes(reorder(feature,n), n, label = perc)) +
  geom_bar(stat = "identity", fill = "dodgerblue3") +
  geom_text(nudge_y = 12) +
  coord_flip() +
  theme_fivethirtyeight()
```
---
&lt;h2&gt; #5: fivevethirtyeight&lt;/h2&gt;
![](recap_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

&lt;h2&gt; #6: profvis&lt;/h2&gt;

&lt;https://rstudio.github.io/profvis/&gt;


```r
mylm &lt;- function(dat, pred, resp, qqplot = FALSE) {
  
  stopifnot(inherits(dat, "data.frame"))
  
  if (is.tibble(dat)) {
    
    dat &lt;- as.data.frame(dat)
    
  }
  
  fit &lt;- lm(dat[,pred] ~ dat[,resp])
  
  cat("coefficients are ...\n",fit$coefficients)
  
  plot(dat[,pred], dat[,resp])
  
}
```

---

&lt;h2&gt; #6: profvis&lt;/h2&gt;

&lt;https://rstudio.github.io/profvis/&gt;


```r
# run these lines
# use keyboard shortcut (option + command + shift + p on MAC) to run and profile the lines
mylm(dat = mtcars, pred = "wt", resp = "mpg")
mylm(dat = congress_age, pred = "congress", resp = "age")

# alterantively wrap in profvis() function
profvis(mylm(dat = mtcars, pred = "wt", resp = "mpg"))
profvis(mylm(dat = congress_age, pred = "congress", resp = "age"))
```

---

&lt;h2&gt; #7: bookdown&lt;/h2&gt;

&lt;https://bookdown.org/yihui/bookdown/&gt;

&lt;https://ismayc.github.io/moderndiver-book/&gt;

&lt;http://nagraj.net/bims8382-textbook/&gt;

&lt;https://github.com/vpnagraj/bims8382-textbook&gt;

---
&lt;h2&gt; #8: threejs&lt;/h2&gt;

&lt;http://bwlewis.github.io/rthreejs/&gt;

<div id="htmlwidget-349317851606bc8eed7c" style="width:504px;height:504px;" class="scatterplotThree html-widget"></div>
<script type="application/json" data-for="htmlwidget-349317851606bc8eed7c">{"x":{"NROW":13,"height":null,"width":null,"axis":false,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":["#FFA500","#FFA500","#FFA500","#FFA500","#FFA500"],"size":2,"stroke":"black","flipy":true,"grid":false,"renderer":"auto","signif":8,"bg":"white","cexsymbols":1,"xlim":[-1,1],"ylim":[-1,1],"zlim":[-1,1],"pch":["o","o","o","o","o","o","o","o","o","o","o","o","o"],"from":[[],[0],[0,0],[0,0,0],[0,0,0,0]],"to":[[],[2],[2,3],[2,3,9],[2,3,9,12]],"lwd":3,"linealpha":1,"center":true,"main":[""],"labels":["SK_1","SK_4","SK_10","SK_13","SK_15","SK_17","SK_19","SK_21","SK_22","SK_26","SK_28","SK_32","SK_33"],"alpha":[1,1,1,1,1],"vertices":[[0.46032282,-0.95222061,-0.75049393,-0.45729799,-1,-0.26857463,-0.23045522,-0.50818602,-1,0.52827441,-0.39034198,0.56940801,1,0.69135118,-0.014869935,0.67337745,0.95836401,-0.57091176,-0.29360943,0.18466802,1,-0.0014296912,0.86000129,-0.85751901,-0.78444484,0.59249469,-0.54868688,-0.51371337,0.87311769,0.047435057,0.67197103,0.38194525,0.64494287,-0.041982678,0.97968179,0.58694062,-1,1,0.29589196],[-0.042201572,-0.27120933,1,0.00028763437,-0.89468842,-1,0.37336468,-0.28200558,0.96079349,0.60855494,-1,-0.62328497,1,0.53620613,0.64262139,-0.54112821,0.077154509,-0.22027188,0.98075698,0.73973307,-0.069236177,0.079722663,-0.18687004,0.31061717,0.62809595,0.68102308,-0.66679002,-0.48273108,1,-0.19273145,-0.068440649,0.96596573,0.64325726,-1,0.12521449,0.39101272,-0.30070758,0.73721769,-0.81539132],[-0.29699468,-0.84459821,-0.59970575,0.13487698,0.69256833,0.89483138,-0.17130756,-1,-0.13221876,-0.39509612,-0.46605324,-0.86433055,0.12658157,0.5532115,-1,-0.11832282,-0.35757016,1,-0.66702918,0.39584419,0.3711453,-0.40623444,1,-0.14275195,0.93078594,-0.108964,-0.76787721,1,-0.53940214,0.011776289,-1,-0.4275149,0.13751685,0.71955157,0.57733712,-0.14515312,0.63030398,-0.60585787,0.73220454],[-0.68058153,-0.0730846,0.8052383,-0.082794068,-1,-1,-0.89649333,-0.38261899,0.53295312,-0.90022586,0.40472151,0.69791043,1,0.036350461,1,-1,0.74472158,-0.26635947,0.22214068,0.92371094,0.88696383,0.87769449,-0.033354144,-0.37732958,0.41714656,-0.34585698,0.20912407,-0.24136197,-0.38084234,0.98255843,0.96504372,0.97122897,0.24740668,0.6178179,0.92476011,-0.5671982,-0.33653796,1,-0.61370091],[-0.50912581,-0.24025462,0.68401176,-0.07023931,-1,-1,-0.021537011,-0.13093793,0.7342408,-0.51641037,-0.49927155,0.24470164,0.75194153,-0.40533788,-0.27175131,0.3233852,0.85190665,0.9623699,-1,0.4773683,-0.40809856,0.30037301,1,0.024655824,0.28580663,0.90981232,-0.69731834,-0.36492068,-0.62855449,1,1,0.077933313,0.39659472,-0.26306918,0.48566824,-0.77872142,-0.83648395,0.18380942,0.75646784]],"xticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"yticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"zticklab":["1.00","0.60","0.20","-0.20","-0.60","-1.00"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1]},"evals":[],"jsHooks":[]}</script>

---

&lt;h2&gt; #8: threejs&lt;/h2&gt;


```r
library(threejs)
library(outbreaks)

# prep edge attributes
hospvisit &lt;- 
  mers.korea.2015$contacts %&gt;%
  filter(exposure == "Visit hospital") %&gt;%
  select(from,to)

# prep node attributes
hospvisitll &lt;-
  mers.korea.2015$linelist %&gt;%
  filter(id %in% hospvisit`\(from | id %in% hospvisit\)`to) %&gt;%
  select(id)
  
# create graph object from data frame
g &lt;- graph_from_data_frame(hospvisit, vertices = hospvisitll)

# remove edges from graph
gnoe &lt;- g - edges(1:12)
```

---

&lt;h2&gt; #8: threejs&lt;/h2&gt;

&lt;https://bwlewis.github.io/rthreejs/animation/animation.html&gt;


```r
# make list of graphs
graph_list &lt;- list(gnoe,
                   gnoe + edge(ends(g, es = E(g), names = FALSE)[1,]), 
                   gnoe + edge(ends(g, es = E(g), names = FALSE)[1,]) + edge(ends(g, es = E(g), names = FALSE)[2,]),
                   gnoe + edge(ends(g, es = E(g), names = FALSE)[1,]) + edge(ends(g, es = E(g), names = FALSE)[2,]) +  edge(ends(g, es = E(g), names = FALSE)[3,]),
                   gnoe + edge(ends(g, es = E(g), names = FALSE)[1,]) + edge(ends(g, es = E(g), names = FALSE)[2,]) +  edge(ends(g, es = E(g), names = FALSE)[3,]) + edge(ends(g, es = E(g), names = FALSE)[4,])
                   )

# plot graphs                   
graphjs(graph_list,
        vertex.shape="sphere", 
        vertex.label = names(V(gnoe)),
        edge.width=3)
```
---
&lt;h2&gt; #8: threejs&lt;/h2&gt;

```r
library(threejs)
g &lt;- make_ring(5) - edges(1:5) # five vertices, no edges

graph_list &lt;- list(
  g + edge(1, 2),
  g + edge(1, 2) + edge(2, 3),
  g + edge(1, 2) + edge(2, 3) + edge(3, 4),
  g + edge(1, 2) + edge(2, 3) + edge(3, 4) + edge(4, 5),
  g + edge(1, 2) + edge(2, 3) + edge(3, 4) + edge(4, 5) + edge(5, 1))

graphjs(graph_list, main=paste(1:5),
        vertex.color=rainbow(5), 
        vertex.shape="sphere", 
        edge.width=3)
```

---

&lt;h2&gt; #8: threejs&lt;/h2&gt;

<div id="htmlwidget-812b1cd4d495de115033" style="width:504px;height:504px;" class="scatterplotThree html-widget"></div>
<script type="application/json" data-for="htmlwidget-812b1cd4d495de115033">{"x":{"NROW":5,"height":null,"width":null,"axis":false,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":[["#FF0000","#CCFF00","#00FF66","#0066FF","#CC00FF"]],"size":2,"stroke":"black","flipy":true,"grid":false,"renderer":"auto","signif":8,"bg":"white","cexsymbols":1,"xlim":[-1,1],"ylim":[-1,1],"zlim":[-1,1],"pch":["o","o","o","o","o"],"from":[[0],[0,1],[0,1,2],[0,1,2,3],[0,1,2,3,0]],"to":[[1],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4,4]],"lwd":3,"linealpha":1,"center":true,"main":["1","2","3","4","5"],"alpha":[[1,1,1,1,1]],"vertices":[[-0.32330996,-0.99926985,-0.7914022,-0.48148664,-1,0.1559252,-1,0.66708238,1,1,0.52202864,0.2942082,-0.67029099,1,-1],[-1,-0.79044437,-0.65259956,-0.53289913,-0.98947049,0.14495318,-0.019845674,-1,1,1,-0.6576776,-1,0.64921507,1,0.40093799],[1,-0.76694391,0.84896713,-0.39643592,-0.98198692,1,-1,-1,0.038978969,-0.70753081,-0.81343976,-1,-0.40885959,1,-0.091551302],[1,-1,-1,0.22532447,-0.7108801,-0.5474445,-0.48221964,-0.18712952,-0.031569646,-0.86207478,0.42966579,0.51603849,-1,1,1],[-0.41905314,0.62309873,1,0.81476281,0.73208717,0.86983612,1,1,-0.3633809,-0.11345031,0.18688443,-1,-1,-1,-0.12987534]],"xticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"yticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"zticklab":["1.00","0.60","0.20","-0.20","-0.60","-1.00"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1]},"evals":[],"jsHooks":[]}</script>

---

&lt;h2&gt; #9: xaringan&lt;/h2&gt;

&lt;http://slides.yihui.name/xaringan/&gt;

## Highlighting Code

.pull-left[

    ```
    nba_tattoos %&gt;%
      group_by(tattoos) %&gt;%
      summarise(n = n()) %&gt;%
      ggplot(aes(tattoos, n)) +
      geom_bar(stat = "identity") +
    {{ theme_excel() }}
    ```
]
.pull-right[


```r
nba_tattoos %&gt;%
  group_by(tattoos) %&gt;%
  summarise(n = n()) %&gt;%
  ggplot(aes(tattoos, n)) +
  geom_bar(stat = "identity") +
* theme_excel() 
```

]

---

&lt;h2&gt; #9: xaringan&lt;/h2&gt;

![](recap_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---
&lt;h2&gt; #10: everything else&lt;/h2&gt;

- **sparklyr**: R interface for using **dplyr** syntax in Spark (big data) queries

  &lt;http://spark.rstudio.com/&gt;
  
- **shinytest**: record expected behavior of a **shiny** app to benchmark performance 

  &lt;https://rstudio.github.io/shinytest/&gt;
  
- **flexdashboard**: dashboard output format for R Markdown documents

  &lt;http://rmarkdown.rstudio.com/flexdashboard/index.html&gt;

- **rcpp**: integrate C++ code with R

  &lt;http://www.rcpp.org/&gt;

---
class: middle

## &lt;https://www.rstudio.com/resources/webinars/#rstudioconf&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('showSlide', function (slide) {setTimeout(function() {window.dispatchEvent(new Event('resize'));}, 100)});</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
